!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("d3-to-image",[],e):"object"==typeof exports?exports["d3-to-image"]=e():t["d3-to-image"]=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";var r=n(1),o=function(t){return t&&t.__esModule?t:{default:t}}(r);!function(t){angular.module("ngD3ToImage",[]).directive("d3ToImage",function(){return{restrict:"E",link:function(e,n){e.export=function(){t({svg:n.find("svg").first()[0],tryToFix:e.tryToFix,callback:e.callback})}},scope:{export:"=",tryToFix:"=",callback:"="}}})}(o.default)},function(t,e,n){!function(e,n){t.exports=n()}(0,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";function r(t){function e(t,e){var n=e.hasChildNodes()?e.children[0]:null,r=document.createElement("style");r.setAttribute("type","text/css"),r.innerHTML=t,e.insertBefore(r,n)}function n(t){for(var e="",n=0;n<document.styleSheets.length;n++){var r=document.styleSheets[n];if(r.cssRules)for(var o=r.cssRules,i=0;i<o.length;i++)e+=o[i].cssText}return e}var r=t.svg.getBoundingClientRect();t.tryToFix&&(t.svg.setAttribute("width",r.width+"px"),t.svg.setAttribute("height",r.height+"px"),t.svg.setAttribute("style",""));var o=function(t){t.setAttribute("xlink","http://www.w3.org/1999/xlink"),e(n(t),t);var r=new XMLSerializer,o=r.serializeToString(t);return o=o.replace(/(\w+)?:?xlink=/g,"xmlns:xlink="),o=o.replace(/NS\d+:href/g,"xlink:href")}(t.svg);!function(t,e,n,r){var o=btoa(unescape(encodeURIComponent(t))),i="data:image/svg+xml;base64,"+o,a=document.createElement("canvas"),u=a.getContext("2d");a.width=e,a.height=n;var c=new Image;c.onload=function(){u.clearRect(0,0,e,n),u.drawImage(c,0,0,e,n),a.toBlob(function(t){r({blob:t,base64:o,base64ForSrc:i})})},c.src=i}(o,r.width,r.height,t.callback)}Object.defineProperty(e,"__esModule",{value:!0}),n(1),e.default=r,t.exports=e.default},function(t,e,n){var r;!function(o){"use strict";var i=o.HTMLCanvasElement&&o.HTMLCanvasElement.prototype,a=o.Blob&&function(){try{return Boolean(new Blob)}catch(t){return!1}}(),u=a&&o.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(t){return!1}}(),c=o.BlobBuilder||o.WebKitBlobBuilder||o.MozBlobBuilder||o.MSBlobBuilder,l=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,s=(a||c)&&o.atob&&o.ArrayBuffer&&o.Uint8Array&&function(t){var e,n,r,o,i,s,f,d,p;if(!(e=t.match(l)))throw new Error("invalid data URI");for(n=e[2]?e[1]:"text/plain"+(e[3]||";charset=US-ASCII"),r=!!e[4],o=t.slice(e[0].length),i=r?atob(o):decodeURIComponent(o),s=new ArrayBuffer(i.length),f=new Uint8Array(s),d=0;d<i.length;d+=1)f[d]=i.charCodeAt(d);return a?new Blob([u?f:s],{type:n}):(p=new c,p.append(s),p.getBlob(n))};o.HTMLCanvasElement&&!i.toBlob&&(i.mozGetAsFile?i.toBlob=function(t,e,n){t(n&&i.toDataURL&&s?s(this.toDataURL(e,n)):this.mozGetAsFile("blob",e))}:i.toDataURL&&s&&(i.toBlob=function(t,e,n){t(s(this.toDataURL(e,n)))})),void 0!==(r=function(){return s}.call(e,n,e,t))&&(t.exports=r)}(window)}])})}])});